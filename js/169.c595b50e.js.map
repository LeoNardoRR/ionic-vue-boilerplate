{"version":3,"file":"js/169.c595b50e.js","mappings":"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","sources":["webpack://app-boilerplate/./src/composition/useToast.js","webpack://app-boilerplate/./src/store/general.js","webpack://app-boilerplate/./src/components/Button.vue","webpack://app-boilerplate/./src/components/Button.vue?4e0d","webpack://app-boilerplate/./src/components/Image.vue","webpack://app-boilerplate/./src/components/Image.vue?fe47","webpack://app-boilerplate/./src/store/login.js","webpack://app-boilerplate/./src/composition/login.js","webpack://app-boilerplate/./src/pages/Login.vue","webpack://app-boilerplate/./src/pages/Login.vue?619c"],"sourcesContent":["import { toastController } from \"@ionic/vue\";\n\nexport default function () {\n  /**\n   * Shows a notification\n   * @param {string} message\n   * @param {string} color\n   * @param {string} position\n   * @param {number} duration\n   * @returns\n   */\n  async function openToast(message, color, position = \"top\", duration = 3000) {\n    const toast = await toastController.create({\n      message,\n      position,\n      color,\n      duration,\n    });\n\n    return toast.present();\n  }\n\n  return {\n    openToast,\n  };\n}\n","import { defineStore } from 'pinia'\n\nexport const useGeneralStore = defineStore('general', {\n  getters: {\n    getImagesAddress() {\n      return process.env.VUE_APP_IMAGES_ADDRESS;\n    },\n    getApiUrl() {\n      return process.env.VUE_APP_API_URL;\n    },\n    getWhatsappTelephone() {\n      return process.env.VUE_APP_WHATS_TELEPHONE;\n    },\n    getContactEmail() {\n      return process.env.VUE_APP_CONTACT_EMAIL;\n    },\n  },\n})","<template>\n  <ion-button\n    class=\"btn ion-activatable ripple-parent\"\n    :color=\"color\"\n    :expand=\"expand\"\n    :size=\"size\"\n    :disabled=\"isLoading\"\n    :fill=\"fill\"\n    :download=\"download\"\n    :href=\"href\"\n    @click=\"!!to && redirectToRoute()\"\n  >\n    <ion-label v-if=\"text && !iconOnly\" :class=\"[hasIcon ? 'ml-2' : '']\">{{\n      text\n    }}</ion-label>\n    <ion-icon\n      v-if=\"hasIcon\"\n      :slot=\"iconOnly ? 'icon-only' : 'start'\"\n      :ios=\"iosIcon || icon\"\n      :md=\"mdIcon || icon\"\n    ></ion-icon>\n    <ion-spinner\n      v-if=\"isLoading\"\n      slot=\"end\"\n      :class=\"iconOnly ? '' : 'ion-margin-start'\"\n      :name=\"spinnerName\"\n    ></ion-spinner>\n    <ion-ripple-effect type=\"unbounded\"></ion-ripple-effect>\n  </ion-button>\n</template>\n\n<script setup>\nimport {\n  IonButton,\n  IonLabel,\n  IonIcon,\n  IonSpinner,\n  IonRippleEffect,\n} from \"@ionic/vue\";\nimport { defineProps, computed, toRefs } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nconst props = defineProps({\n  color: {\n    type: String,\n    default: \"primary\",\n  },\n  text: {\n    type: String,\n    required: false,\n  },\n  expand: {\n    type: String,\n    default: \"block\",\n  },\n  size: {\n    type: String,\n    default: \"medium\",\n  },\n  icon: {\n    default: null,\n    required: false,\n  },\n  iosIcon: {\n    default: null,\n    required: false,\n  },\n  mdIcon: {\n    default: null,\n    required: false,\n  },\n  isLoading: {\n    type: Boolean,\n    default: false,\n  },\n  spinnerName: {\n    type: String,\n    default: \"crescent\",\n  },\n  iconOnly: {\n    type: Boolean,\n    default: false,\n  },\n  fill: {\n    type: String,\n    default: \"solid\",\n  },\n  to: {\n    type: [String, Object],\n    required: false,\n  },\n  download: {\n    type: Boolean,\n    default: false,\n  },\n  href: {\n    type: String,\n    required: false,\n  },\n});\n\nconst { icon, iosIcon, mdIcon, to } = toRefs(props);\n\nconst hasIcon = computed(() => {\n  return icon.value || iosIcon.value || mdIcon.value;\n});\n\nconst router = useRouter();\n\nfunction redirectToRoute() {\n  if (!to.value) return;\n\n  router.push(to.value);\n}\n</script>\n\n<style scoped>\n.btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n","import script from \"./Button.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Button.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=91873b5e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-91873b5e\"]])\n\nexport default __exports__","<template>\n  <ion-img\n    v-bind=\"useAttrs()\"\n    :src=\"\n      !imageFailsToLoad && !!src ? `${getImagesAddress}/${src}` : defaultImage\n    \"\n    @ionError=\"imageFailsToLoad = true\"\n  />\n</template>\n\n<script setup>\nimport { IonImg } from \"@ionic/vue\";\nimport { defineProps, ref, computed, useAttrs } from \"vue\";\nimport { useGeneralStore } from \"../store/general\";\n\ndefineProps({\n  src: {\n    type: String,\n    required: false,\n  },\n});\n\nconst generalStore = useGeneralStore();\n\nconst getImagesAddress = computed(() => generalStore.getImagesAddress);\nconst imageFailsToLoad = ref(false);\nconst defaultImage = \"assets/vectors/blank.svg\";\n</script>\n","import script from \"./Image.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Image.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineStore } from \"pinia\";\nimport api from \"@/api\";\n\nexport const useLoginStore = defineStore(\"login\", {\n  actions: {\n    async setToken(token) {\n      await Preferences.set({\n        key: \"token\",\n        value: token,\n      });\n    },\n    async setUserData(userData) {\n      await Preferences.set({\n        key: \"user\",\n        value: JSON.stringify({\n          userId: userData.id,\n          userType: userData.typeUser,\n          userName: userData.userName,\n        }),\n      });\n    },\n    login({}, userCredentials) {\n      return api\n        .post(\"/login\", userCredentials)\n        .then(async (response) => {\n          await this.setToken(response.token);\n          await this.setUserData(response.data);\n\n          return response.data;\n        })\n        .catch((error) => error.response);\n    },\n  },\n});\n","import { useLoginStore } from \"../store/login\";\nimport redirectToHome from \"./redirectToHome\";\nimport useToast from \"./useToast\";\n\nexport default function () {\n  const { openToast } = useToast();\n  const { redirectTo } = redirectToHome();\n  const loginStore = useLoginStore();\n\n  async function userLogin(userCredentials) {\n    const data = {\n      email: userCredentials.email,\n      password: userCredentials.password,\n    };\n\n    loginStore.login(data)\n      .then((response) => {\n        openToast(\"Logged with sucess\", \"success\", \"top\");\n\n        redirectTo(\n          response.data.userType,\n          { anyCustomParams: response.customParams },\n          true,\n        );\n\n        return Promise.resolve();\n      })\n      .catch(() => {\n        openToast(\"Something was wrong on login\", \"danger\", \"top\");\n        Promise.reject();\n      });\n  }\n\n  return {\n    userLogin,\n    openToast,\n    redirectTo,\n  };\n}\n","<template>\n  <base-layout\n    page-default-back-link=\"/home\"\n    :show-menu-button=\"false\"\n    :ignore-history=\"true\"\n  >\n    <ion-row>\n      <ion-col size=\"12\">\n        <Image class=\"mb-4\" style=\"height: 200px\" src=\"assets/icon/logo.png\" />\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col size=\"12\">\n        <ion-item class=\"form-field\">\n          <ion-icon slot=\"start\" :icon=\"Icon.mail\"></ion-icon>\n          <ion-input\n            v-model=\"Fields.email\"\n            clear-input\n            required\n            label=\"E-mail\"\n            type=\"email\"\n            label-placement=\"floating\"\n            inputmode=\"email\"\n            @input=\"errorMessages.email = ''\"\n          ></ion-input>\n        </ion-item>\n        <error-message :text=\"errorMessages.email\" />\n      </ion-col>\n      <ion-col size=\"12\">\n        <ion-item class=\"form-field\">\n          <ion-icon slot=\"start\" :icon=\"Icon.key\"></ion-icon>\n          <ion-input\n            v-model=\"Fields.password\"\n            required\n            name=\"password\"\n            label=\"Password\"\n            label-placement=\"floating\"\n            clear-input\n            :type=\"showPassword ? 'text' : 'password'\"\n            @input=\"errorMessages.password = ''\"\n          ></ion-input>\n          <ion-icon\n            slot=\"end\"\n            :icon=\"showPassword ? Icon.eyeOff : Icon.eye\"\n            class=\"pointer\"\n            @click=\"showPassword = !showPassword\"\n          ></ion-icon>\n        </ion-item>\n        <error-message :text=\"errorMessages.password\" />\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col size=\"12\">\n        <Button\n          color=\"primary\"\n          text=\"Login\"\n          :icon=\"Icon.enterOutline\"\n          :is-loading=\"loading\"\n          @click=\"loginUser()\"\n        />\n      </ion-col>\n    </ion-row>\n    <ion-row class=\"ion-text-center\">\n      <ion-col size=\"12\">\n        <ion-text color=\"tertiary\" class=\"pointer\" @click=\"redirectToRecoveryPassword()\">\n          Forgot password?\n        </ion-text>\n      </ion-col>\n    </ion-row>\n  </base-layout>\n</template>\n\n<script setup>\nimport { enterOutline, mail, key, logIn, eye, eyeOff } from \"ionicons/icons\";\n\nimport {\n  IonInput,\n  IonRow,\n  IonCol,\n  IonItem,\n  IonIcon,\n  IonText,\n} from \"@ionic/vue\";\n\nimport { useRouter } from \"vue-router\";\nimport { ref } from \"vue\";\n\nimport Button from \"../components/Button.vue\";\nimport Image from \"../components/Image.vue\";\nimport login from \"../composition/login\";\nimport useEmitter from \"../composition/useEmitter\";\n\nconst { emitter } = useEmitter();\nconst { userLogin } = login();\nconst router = useRouter();\n\nconst showPassword = ref(false);\n\nconst Icon = ref({\n  mail,\n  key,\n  eye,\n  eyeOff,\n  logIn,\n  enterOutline,\n});\n\nconst Fields = ref({\n  email: \"\",\n  password: \"\",\n});\n\nconst errorMessages = ref({\n  email: \"\",\n  password: \"\",\n});\n\nconst loading = ref(false);\n\nfunction loginUser() {\n  if (!validateFields()) {\n    return;\n  }\n\n  loading.value = true;\n\n  userLogin(Fields)\n    .then(() => {\n      emitter.emit(\"logged\");\n    })\n    .finally(() => {\n      loading.value = false;\n    });\n}\nfunction validateFields() {\n  let valid = true;\n\n  if (!Fields.value.email) {\n    errorMessages.value.email = \"Email invalid\";\n    valid = false;\n  }\n\n  if (!Fields.value.password) {\n    errorMessages.value.password = \"Password invalid\";\n    valid = false;\n  }\n\n  return valid;\n}\n\nfunction redirectToRecoveryPassword() {\n  router.push({ name: \"recovery-password\" });\n}\n</script>\n\n<style scoped>\n.form-field {\n  display: flex;\n  align-items: center;\n}\n\n.pointer {\n  cursor: pointer;\n}\n</style>\n","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=dcb26b44&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-dcb26b44\"]])\n\nexport default __exports__"],"names":["async","openToast","message","color","position","duration","toast","toastController","create","present","useGeneralStore","defineStore","getters","getImagesAddress","process","getApiUrl","getWhatsappTelephone","getContactEmail","icon","iosIcon","mdIcon","to","toRefs","props","hasIcon","computed","value","router","useRouter","redirectToRoute","push","__exports__","defaultImage","generalStore","imageFailsToLoad","ref","useLoginStore","actions","setToken","token","Preferences","set","key","setUserData","userData","JSON","stringify","userId","id","userType","typeUser","userName","login","userCredentials","api","post","then","this","response","data","catch","error","useToast","redirectTo","redirectToHome","loginStore","userLogin","email","password","anyCustomParams","customParams","Promise","resolve","reject","emitter","useEmitter","showPassword","Icon","mail","eye","eyeOff","logIn","enterOutline","Fields","errorMessages","loading","loginUser","validateFields","emit","finally","valid","redirectToRecoveryPassword","name"],"sourceRoot":""}